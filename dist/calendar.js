(()=>{"use strict";window.calendarInit=function(e){var a=document.body||document.querySelector("body"),t=document.querySelector(e.target);e.type=e.type||"date";var n=(new Date).getFullYear(),c=(new Date).getMonth()+1,d=(new Date).getDate();function r(e,a){var t=new Date(e,a-1,1);return t.setMonth(t.getMonth()+1),t.setDate(0),t.getDate()}function i(r){for(var i=function(i){var s=document.createElement("div");s.classList.add("item-day");var l=document.createElement("span");l.innerText=i,r.classNames&&l.classList.add(r.classNames),d===i&&n===r.year&&c===r.month&&l.classList.add("active"),l.addEventListener("click",(function(){d=i,n=r.year,c=r.month,t.value="".concat(n,"-").concat(c,"-").concat(d);var s=document.querySelector(".item-day .active");s&&s.classList.remove("active"),this.classList.add("active"),e.dayChange&&e.dayChange("".concat(n,"-").concat(c,"-").concat(d)),a.removeChild(r.dCalendar)})),s.appendChild(l),r.parentElem.appendChild(s)},s=r.startDay;s<=r.endDay;s++)i(s)}function s(e,a,t,d){e.innerHTML='<div class="d-calendar-week"><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span><span>日</span></div>',function(e,a,t,n){var c=new Date(t,n-1,1).getDay(),d=1===n?t-1:t,s=1===n?12:n-1,l=r(d,s);1!==c&&i({parentElem:e,dCalendar:a,startDay:l-(0===c?5:c-2),endDay:l,year:d,month:s,classNames:"prev"})}(e,a,t,d),i({parentElem:e,dCalendar:a,startDay:1,endDay:r(t,d),year:n,month:c}),function(e,a,t,n){var c=new Date(t,n-1,1).getDay();i({parentElem:e,dCalendar:a,startDay:1,endDay:42-r(t,n)-(0===c?6:c-1),year:12===n?t+1:t,month:12===n?1:n+1,classNames:"next"})}(e,a,t,d)}function l(d,r,i){d.innerHTML="";for(var l=function(l){var o=document.createElement("div");o.classList.add("item-month");var m=document.createElement("span");m.innerText="".concat(l,"月"),c===l&&m.classList.add("active"),m.addEventListener("click",(function(){c=l,i.innerText="".concat(c,"月");var o=document.querySelector(".item-month .active");o&&o.classList.remove("active"),this.classList.add("active"),"month"===e.type&&(t.value="".concat(n,"-").concat(c),a.removeChild(r)),e.monthChange&&e.monthChange("".concat(n,"-").concat(c)),"date"===e.type&&s(d,r,n,c)})),o.appendChild(m),d.appendChild(o)},o=1;o<=12;o++)l(o)}function o(d,r,i,o,m,v){d.innerHTML="";for(var p=function(m){var v=document.createElement("div");v.classList.add("item-year");var p=document.createElement("span");p.innerText=m,n===m&&p.classList.add("active"),p.addEventListener("click",(function(){n=m,i.innerText="".concat(n,"年");var v=document.querySelector(".item-year .active");v&&v.classList.remove("active"),this.classList.add("active"),"year"===e.type&&(t.value="".concat(n),a.removeChild(r)),e.yearChange&&e.yearChange("".concat(n)),"month"===e.type&&l(d,r,o),"date"===e.type&&s(d,r,n,c)})),v.appendChild(p),d.appendChild(v)},u=m;u<=v;u++)p(u)}t.addEventListener("click",(function(){var t=document.createElement("div");t.classList.add("d-calendar");var d=document.createElement("div");d.classList.add("d-calendar-mask"),d.addEventListener("click",(function(){a.removeChild(t)})),t.appendChild(d);var r=document.createElement("div");r.classList.add("d-calendar-container"),t.appendChild(r);var i=document.createElement("div");i.classList.add("d-calendar-header"),r.appendChild(i);var m=document.createElement("span");m.classList.add("d-calendar-year"),m.innerText="".concat(n,"年"),m.addEventListener("click",(function(){o(u,t,this,v,e.minYear||(new Date).getFullYear()-15,e.maxYear||(new Date).getFullYear()+4)})),i.appendChild(m);var v=document.createElement("span");v.classList.add("d-calendar-month"),v.innerText="".concat(c,"月"),v.addEventListener("click",(function(){l(u,t,this)})),i.appendChild(v);var p=document.createElement("span");p.classList.add("d-calendar-close"),p.addEventListener("click",(function(){a.removeChild(t)})),i.appendChild(p);var u=document.createElement("div");u.classList.add("d-calendar-content"),r.appendChild(u),"year"===e.type&&o(u,t,this,v,e.minYear||(new Date).getFullYear()-15,e.maxYear||(new Date).getFullYear()+4),"month"===e.type&&l(u,t,v),"date"===e.type&&s(u,t,n,c),a.appendChild(t)}))}})();